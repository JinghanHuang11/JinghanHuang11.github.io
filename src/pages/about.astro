---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { profile } from '@/data/profile';
import CertificateCard from '@/components/ui/CertificateCard.astro';
import { ui, type Locale } from '@/i18n/ui';

const urlLocale = Astro.url.searchParams.get('lang') as Locale | null;
const locale: Locale = (urlLocale === 'en' || urlLocale === 'zh' ? urlLocale : 'en');
const t = ui[locale];
---

<BaseLayout
  title={`${t.about.title} - ${profile.name[locale]}`}
  description={profile.bio[locale]}
  locale={locale}
>
  <div class="container-custom section-padding">
    <div class="mx-auto max-w-4xl">
      <!-- Header -->
      <div class="mb-12 text-center">
        <h1 class="heading-primary mb-6">{t.about.title}</h1>
        <p class="text-body mx-auto max-w-2xl">
          {profile.bio[locale]}
        </p>
      </div>

      <!-- Education -->
      <section class="mb-16">
        <h2 class="heading-secondary mb-8">{t.about.education}</h2>
        <div class="space-y-6">
          {profile.education.map((edu) => (
            <div class="card">
              <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <div class="flex-1">
                  <h3 class="text-xl font-semibold text-slate-900 dark:text-slate-100">
                    {edu.degree[locale]}
                  </h3>
                  <p class="text-body mt-1">
                    {edu.institution[locale]}
                  </p>
                </div>
                <div class="mt-2 text-sm text-slate-600 dark:text-slate-400 sm:mt-0">
                  {edu.period}
                </div>
              </div>
            </div>
          ))}
        </div>
      </section>

      <!-- Qualifications -->
      <section class="mb-16">
        <h2 class="heading-secondary mb-8">{t.about.qualifications}</h2>
        <div class="grid gap-4 sm:grid-cols-2">
          {profile.qualifications.map((qual) => (
            <div class="card">
              <div class="flex items-start justify-between">
                <div>
                  <h3 class="font-semibold text-slate-900 dark:text-slate-100">
                    {qual.name[locale]}
                  </h3>
                  <p class="text-muted mt-1">{qual.issuer}</p>
                </div>
                <svg class="h-6 w-6 text-primary-600 dark:text-primary-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
            </div>
          ))}
        </div>
      </section>

      <!-- Certificates -->
      <section class="mb-16">
        <div class="mb-8 flex items-center justify-between">
          <h2 class="heading-secondary">
            {locale === 'en' ? 'Certificates & Awards' : '证书与荣誉'}
          </h2>
          <div class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400">
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>{profile.certificates.length} {locale === 'en' ? 'certificates' : '个证书'}</span>
          </div>
        </div>

        <div class="grid gap-6 sm:grid-cols-2">
          {profile.certificates.map((cert, index) => (
            <CertificateCard certificate={cert} locale={locale} index={index} />
          ))}
        </div>
      </section>

      <!-- Skills -->
      <section class="mb-16">
        <h2 class="heading-secondary mb-8">{t.about.skills}</h2>
        <div class="space-y-6">
          {profile.skills.map((skillGroup) => (
            <div>
              <h3 class="mb-3 text-lg font-semibold text-slate-900 dark:text-slate-100">
                {skillGroup.category[locale]}
              </h3>
              <div class="flex flex-wrap gap-2">
                {skillGroup.items.map((skill) => (
                  <span class="rounded-full bg-primary-50 px-4 py-2 text-sm font-medium text-primary-700 dark:bg-primary-950/50 dark:text-primary-300">
                    {skill}
                  </span>
                ))}
              </div>
            </div>
          ))}
        </div>
      </section>

      <!-- Research Interests -->
      <section>
        <h2 class="heading-secondary mb-8">{t.about.interests}</h2>
        <div class="card">
          <ul class="grid gap-3 sm:grid-cols-2">
            {profile.interests[locale].map((interest) => (
              <li class="flex items-start">
                <svg class="mr-3 h-5 w-5 flex-shrink-0 text-primary-600 dark:text-primary-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 5l7 7-7 7" />
                </svg>
                <span class="text-body">{interest}</span>
              </li>
            ))}
          </ul>
        </div>
      </section>
    </div>
  </div>
</BaseLayout>
