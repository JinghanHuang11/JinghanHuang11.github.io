---
import type { Locale } from '@/i18n/ui';

interface Resource {
  id: string;
  title: { en: string; zh: string };
  description: { en: string; zh: string };
  type: 'pdf' | 'ppt' | 'excel' | 'word';
  fileUrl: string;
  fileSize: string;
  date: string;
}

interface Props {
  resource: Resource;
  locale: Locale;
  index?: number;
}

const { resource, locale, index = 0 } = Astro.props;

const typeIcons = {
  pdf: 'üìÑ',
  ppt: 'üìä',
  excel: 'üìà',
  word: 'üìù',
};

const typeColors = {
  pdf: 'bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400',
  ppt: 'bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400',
  excel: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400',
  word: 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400',
};
---

<div class="resource-card group relative overflow-hidden rounded-lg border border-slate-200 bg-white p-4 shadow-sm transition-all hover:shadow-md hover:-translate-y-0.5 dark:border-slate-800 dark:bg-dark-900">
  <!-- File Type Badge -->
  <div class="mb-3 flex items-center justify-between">
    <span class={`inline-flex items-center gap-1.5 rounded-full px-3 py-1 text-xs font-semibold ${typeColors[resource.type]}`}>
      <span class="text-sm">{typeIcons[resource.type]}</span>
      <span class="uppercase">{resource.type}</span>
    </span>
    <span class="text-xs text-slate-500 dark:text-slate-400">
      {resource.fileSize}
    </span>
  </div>

  <!-- Title -->
  <h3 class="mb-2 text-base font-semibold text-slate-900 group-hover:text-primary-600 dark:text-slate-100 dark:group-hover:text-primary-400">
    {resource.title[locale]}
  </h3>

  <!-- Description -->
  <p class="mb-3 text-sm text-slate-600 dark:text-slate-400 line-clamp-2">
    {resource.description[locale]}
  </p>

  <!-- Footer -->
  <div class="flex items-center justify-between border-t border-slate-200 pt-3 dark:border-slate-800">
    <span class="text-xs text-slate-500 dark:text-slate-500">
      {resource.date}
    </span>
    <a
      href={resource.fileUrl}
      target="_blank"
      rel="noopener noreferrer"
      class="inline-flex items-center gap-1.5 rounded-lg bg-primary-600 px-3 py-1.5 text-xs font-medium text-white transition-colors hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600"
    >
      <svg class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
      </svg>
      <span>{locale === 'en' ? 'Download' : '‰∏ãËΩΩ'}</span>
    </a>
  </div>
</div>

<style>
  .resource-card {
    animation: fadeIn 0.3s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
