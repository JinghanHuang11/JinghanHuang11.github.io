---
import type { Certificate } from '@/data/profile';
import type { Locale } from '@/i18n/ui';

interface Props {
  certificate: Certificate;
  locale: Locale;
  index: number;
}

const { certificate, locale, index } = Astro.props;
const delay = index * 100; // Staggered animation delay
---

<div
  class="group card overflow-hidden transition-all duration-300 hover:-translate-y-2 hover:shadow-xl"
  style={`animation: fadeInUp 0.6s ease-out ${delay}ms both;`}
>
  <!-- Certificate Image -->
  <div class="relative aspect-[4/3] w-full overflow-hidden bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900">
    <img
      src={certificate.image}
      alt={certificate.name[locale]}
      class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"
      loading="lazy"
    />
    <!-- Overlay on hover -->
    <div class="absolute inset-0 bg-gradient-to-t from-primary-900/80 via-transparent to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>

    <!-- Badge -->
    <div class="absolute top-4 right-4 rounded-full bg-white/90 px-3 py-1 text-xs font-semibold text-slate-900 shadow-lg backdrop-blur-sm dark:bg-dark-900/90 dark:text-slate-100">
      {certificate.date}
    </div>
  </div>

  <!-- Certificate Info -->
  <div class="p-6">
    <h3 class="heading-tertiary mb-2 text-slate-900 dark:text-slate-100">
      {certificate.name[locale]}
    </h3>

    <p class="text-sm font-medium text-primary-600 dark:text-primary-400 mb-3">
      {certificate.issuer[locale]}
    </p>

    <p class="text-body text-sm text-slate-600 dark:text-slate-400">
      {certificate.description[locale]}
    </p>

    <!-- View Button -->
    <button
      class="mt-4 flex items-center gap-2 text-sm font-medium text-primary-600 transition-colors hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300"
      onclick={`window.open('${certificate.image}', '_blank')`}
    >
      <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
      </svg>
      {locale === 'en' ? 'View Certificate' : '查看证书'}
    </button>
  </div>
</div>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
